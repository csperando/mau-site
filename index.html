<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <!-- <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/> -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="description" content="A repository Coleman and Ty's ongoing Mau battles"/>
        <title>Coleman and Ty Play Mau</title>
        <link rel="manifest" href="site.webmanifest"/>
        <meta name="theme-color" content="#ffffff"/>
        <link rel="icon" type="image/x-icon" href="./favicon.ico"/>
        <link rel="apple-touch-icon" sizes="180x180" href="./images/apple-touch-icon.png">

        <!-- Import Vue -->
        <script src="./js/libs/vue.js"></script>

        <!-- Styles -->
        <link rel="preload" as="style" href="./css/main.css"/>
        <link rel="stylesheet" type="text/css" href="./css/main.css"/>

        <!-- Component Styles -->
        <link rel="preload" as="style" href="./css/header.css"/>
        <link rel="stylesheet" type="text/css" href="./css/header.css"/>

        <link rel="preload" as="style" href="./css/modal.css"/>
        <link rel="stylesheet" type="text/css" href="./css/modal.css"/>

        <link rel="preload" as="style" href="./css/newGame.css"/>
        <link rel="stylesheet" type="text/css" href="./css/newGame.css"/>

        <link rel="preload" as="style" href="./css/stats.css"/>
        <link rel="stylesheet" type="text/css" href="./css/stats.css"/>

        <link rel="preload" as="style" href="./css/forms.css"/>
        <link rel="stylesheet" type="text/css" href="./css/forms.css"/>

        <link rel="preload" as="style" href="./css/bottomSections.css"/>
        <link rel="stylesheet" type="text/css" href="./css/bottomSections.css"/>


    </head>

    <body>
        <div class="background"></div>

        <div class="full-screen" id="app">
            <dashboard></dashboard>
        </div>

        <section class="full-screen space-below overflow-show" id="about-mau">
            <p class="title space-around text-shadow green"><b>About Mau</b></p>
            <div class="text-section-wrap">
                <div class="light-background"></div>
                <p>
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    Mau is a card game that can be classified as a variation of Crazy Eights (Uno). The goal is to get rid of all of your cards the fastest.
                    After that, the rules seem to vary significantly from country to country. Some people play with 32 cards, 54 cards, or other variable amounts.
                    Different cards have special rules, for example making your opponent draw extra cards.
                </p>
                <br/>

                <p>
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    There is not a well established <em>standard</em> Mau-Mau ruleset.
                    Below I'll describe how my girlfriend and I like to play 1-V-1. In essence, Mau is a game of savagery. You can try any insidious strategy you like, but
                    if you get caught, then you'll pay for it. Basically, if you are not trying to cause as much emotional damage and embarassment to the other player, then you're playing wrong.
                </p>
                <br/>
            </div>
        </section>

        <section class="full-screen space-below overflow-show" id="rules-mau">
            <p class="title space-around text-shadow green"><b>Rules</b></p>
            <div class="text-section-wrap">
                <div class="light-background"></div>
                <p>
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    We play with a <b>56</b> card deck (4 jokers). Each player starts with <b>7</b> cards. The dealer is the loser of the last round. Once all cards are dealt, the top card of the deck is palced face up. Then each player
                    takes turns playing a card that is either the same rank, same suit, or wild. Alternatively, you can draw a card from the top of the deck instead of playing a card whenever you
                    feel like it. You can only draw one card per turn, but if the card you draw is playable then you can play the card. However, if the card touches the other cards in your hand,
                    then you can no longer play it. If you accidentally knock over any cards, then you have to keep any card who's face you saw. When you have one card left you have to say "Mau" out-loud.
                    If you do not before your opponent finishes their next move, then they can call "Mau" on you, and you have to take 2 cards. As soon as one person has no cards left, the round is over.
                    The loser then adds the point value of every card in their hand, and that is their final score for the round. Once a player exceeds <b>300</b> points, then they lose the game.
                </p>
                <br/>

                <p>
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    We only play with 4 special cards, <b>eights</b>, <b>jacks</b>, <b>sevens</b>, and <b>jokers</b>. The eight skips the other player's turn, the joker is a wild (changes suit), and the seven and joker are draw cards. The seven can only be played on the same suit or a seven/joker, however the joker
                    is wild and can be played on any other card. Sevens mean draw <b>2</b>, and jokers mean draw <b>4</b>. All draw cards can be <b>countered</b> by another draw card indefinitely. When this happens, the total number
                    of cards required to be drawn by the loser of the exchange is the sum off all the draw cards. For example, if player 1 plays a seven, player 2 plays a joker, and then player 1 plays a joker then
                    player 2 will have to draw 10 cards. If the last card to be played is a jack, the the loser's final score for that round is <b>doubled</b>.
                </p>
                <br/>

                <p>
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    You can play multiple cards at a time if they are the same rank (<em>i.e. the five of diamonds and the five of hearts</em>). If there are ever four of a kind played in a row (not necessarily by the same person),
                    then the game is over and whoever finished the four of a kind wins. You can also try to be sneaky. When dealing at the start of the game, feel free to deal extra cards to your opponents. Once anyone see the face of
                    a card, then it is theirs to keep. When playing multiple cards at once, sneak in an extra if you feel so bold. Play a six on a nine. However, if you get called out on any shenanigans, then you have to draw 2 cards.
                </p>
                <br/>
            </div>
        </section>

        <section class="full-screen space-below overflow-show" id="points-mau">
            <p class="title space-around text-shadow green"><b>Points</b></p>
            <div class="text-section-wrap">
                <div class="light-background"></div>

                <div class="points-wrap">
                    <div class="rule-row">
                        <div class="flex-col flex-center small-gap">
                            <img src="./images/cards/Joker.svg" alt="" width="100" height="100"/>
                            <p>Joker</p>
                        </div>
                        <span>60</span>
                    </div>
                    <div class="rule-row">
                        <div class="flex-col flex-center small-gap">
                            <img src="./images/cards/ASpades.svg" alt="Ace of spades" width="100" height="100"/>
                            <p>Ace</p>
                        </div>
                        <span>50</span>
                    </div>
                    <div class="rule-row">
                        <div class="flex-col flex-center small-gap">
                            <img src="./images/cards/KDiamonds.svg" alt="" width="100" height="100"/>
                            <p>King</p>
                        </div>
                        <span>40</span>
                    </div>
                    <div class="rule-row">
                        <div class="flex-col flex-center small-gap">
                            <img src="./images/cards/QHearts.svg" alt="" width="100" height="100"/>
                            <p>Queen</p>
                        </div>
                        <span>30</span>
                    </div>
                    <div class="rule-row">
                        <div class="flex-col flex-center small-gap">
                            <img src="./images/cards/JClubs.svg" alt="" width="100" height="100"/>
                            <p>Jack</p>
                        </div>
                        <span>30</span>
                    </div>
                    <div class="rule-row">
                        <div class="flex-col flex-center small-gap">
                            <img src="./images/cards/7Hearts.svg" alt="" width="100" height="100"/>
                            <p>Seven</p>
                        </div>
                        <span>20</span>
                    </div>
                    <div class="rule-row">
                        <div class="flex-col flex-center small-gap">
                            <img src="./images/cards/8Clubs.svg" alt="" width="100" height="100"/>
                            <p>Eight</p>
                        </div>
                        <span>10</span>
                    </div>
                    <div class="rule-row">
                        <div class="flex-col flex-center small-gap">
                            <img src="./images/cards/10Diamonds.svg" alt="" width="100" height="100"/>
                            <p>Ten</p>
                        </div>
                        <span>10</span>
                    </div>
                    <div class="rule-row">
                        <div class="flex-col flex-center small-gap">
                            <img src="./images/cards/stack.svg" alt="" width="100" height="100"/>
                            <p>Others</p>
                        </div>
                        <span>5</span>
                    </div>
                </div>
            </div>
        </section>


        <script type="text/x-template" id="mau-login-component">
            <div class="modal-form-wrap">
                <form @submit.prevent="loginUser" class="flex-col col-center small-gap">
                    <div class="flex-row small-gap m-flex-col m-flex-center">
                        <div class="flex-col">
                            <label>Username:</label>
                            <input v-model="username" type="text" name="username"/>
                        </div>
                        <div class="flex-col">
                            <label>Password:</label>
                            <input v-model="password" type="password" name="password"/>
                        </div>
                    </div>
                    <div class="flex-row flex-center">
                        <button type="submit" class="std-btn">login</button>
                    </div>
                </form>
            </div>
        </script>

        <script type="text/x-template" id="mau-signup-component">
            <div class="modal-form-wrap">
                <form @submit.prevent="signupUser" class="flex-col col-center small-gap">
                    <div class="flex-row small-gap m-flex-col m-flex-center">
                        <div class="flex-col">
                            <label>First name:</label>
                            <input v-model="firstName" type="text" name="firstName" required/>
                        </div>
                        <div class="flex-col">
                            <label>Last name:</label>
                            <input v-model="lastName" type="text" name="lastName" required/>
                        </div>
                    </div>
                    <div class="flex-row small-gap m-flex-col m-flex-center">
                        <div class="flex-col">
                            <label>Email:</label>
                            <input v-model="email" type="text" name="email" required/>
                        </div>
                        <div class="flex-col">
                            <label>Username:</label>
                            <input v-model="username" type="text" name="username" required/>
                        </div>
                    </div>
                    <div class="flex-row small-gap m-flex-col m-flex-center">
                        <div class="flex-col">
                            <label>Password:</label>
                            <input v-model="password" type="password" name="password" required/>
                        </div>
                        <div class="flex-col">
                            <label>Confirm:</label>
                            <input v-model="confirm" type="password" name="confirm" required/>
                        </div>
                    </div>
                    <div class="flex-row flex-center">
                        <button type="submit" class="std-btn">Signup</button>
                    </div>
                </form>
            </div>
        </script>

        <script type="text/x-template" id="mau-user-header-component">
            <div v-if="user">
                <div class="flex-row flex-center space-around overflow-show">
                    <img class="tilted" src="./images/cards/6Spades.svg" alt="six of spades playing card" height="100" width="100"/>
                    <div class="flex-col small-gap">
                        <p class="text-center title">{{user.username}}</p>
                        <p class="text-center">{{user.firstName}} {{user.lastName}}</p>
                    </div>
                </div>
            </div>
        </script>

        <script type="text/x-template" id="mau-settings-component">
            <div class="modal-form-wrap">
                <form class="flex-col col-center small-gap">
                    <div class="flex-row small-gap">
                        <div class="flex-row flex-center small-gap">
                            <div class="flex-col flex-center">
                                <p class="text-center green"><b>Dark Theme</b></p>
                                <label>off</label>
                            </div>
                            <input type="checkbox" name="darkTheme"/>
                        </div>
                    </div>
                </form>
            </div>
        </script>

        <script type="text/x-template" id="mau-round-component">
            <div class="space-above flex-row row-space-between m-flex-col m-flex-center m-small-gap">
                <div class="round-row-outer flex-row flex-center small-gap">
                    <span class="green"><b>Round&nbsp;{{ index }}</b></span>
                    <div @click="deleteRound" class="flex-row flex-center delete-round m-show">
                        <img src="./images/icons/trash.svg" alt="trashcan icon - delete round" height="30" width="30"/>
                    </div>
                </div>
                <div class="round-row-inner">
                    <div class="flex-col">
                        <div class="flex-col">
                            <label class="text-center" for="round-winner">Winner</label>
                            <input type="text" required v-model="round.winner.name"/>
                        </div>

                        <div class="flex-col">
                            <label class="text-center" for="round-loser">Loser</label>
                            <input type="text" required v-model="round.loser.name"/>
                        </div>

                        <div class="flex-col">
                            <label class="text-center" for="round-1-points">Points</label>
                            <div class="flex-row flex-center">
                                <input type="number" required v-model="round.points"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div @click="deleteRound" class="round-row-outer flex-row flex-center delete-round m-hide">
                    <img src="./images/icons/trash.svg" alt="trashcan icon - delete round" height="30" width="30"/>
                </div>
            </div>
        </script>

        <script type="text/x-template" id="mau-new-game-component">
            <form @submit.prevent="submitGame">
                <p class="text-center"><b>Add a New Game!</b></p>

                <div class="space-around">
                    <p class="text-center"><b>Overall</b></p>
                    <div class="two-col m-flex-col m-flex-center space-above">
                        <div class="flex-col">
                            <label class="m-text-center" for="winner">Winner</label>
                            <input v-model="game.winner.name" required type="text" name="overall-winner"/>
                        </div>
                        <div class="flex-col">
                            <label class="m-text-center" for="loser">Loser</label>
                            <input v-model="game.loser.name" required type="text" name="overall-loser"/>
                        </div>
                    </div>

                    <div class="flex-col space-above">
                        <label class="text-center" for="score">Score</label>
                        <div class="flex-row flex-center m-flex-col">
                            <input v-model="game.overall[0]" required type="number" name="overall-score-a"/>
                            <span>&nbsp;&nbsp;<em>to</em>&nbsp;&nbsp;</span>
                            <input v-model="game.overall[1]" required type="number" name="overall-score-b"/>
                        </div>
                    </div>
                </div>

                <div class="space-above">
                    <p class="text-center"><b>Rounds</b></p>
                    <new-round
                        v-for="(round, index) in game.rounds"
                        :round="round"
                        :key="round.id"
                        :index="game.rounds.indexOf(round) + 1"
                        @deleteRound="deleteRound"
                        ></new-round>
                </div>

                <div class="space-above">
                    <div class="flex-row flex-center">
                        <div @click="newRound" class="new-round-btn flex-row flex-center small-gap">
                            <img src="./images/icons/plus-green.svg" alt="plus sign" width="16" height="16"/>
                            <span>add round</span>
                        </div>
                    </div>
                </div>

                <div class="space-above">
                    <div class="flex-row flex-center">
                        <button class="std-btn">Submit</button>
                    </div>
                </div>

            </form>
        </script>

        <script type="text/x-template" id="mau-menu-component">
            <div>
                <div v-show="loggedOut" class="flex-col flex-center small-gap">
                    <span class="modal-menu-option"
                        @click="toggleLogin"
                        >login</span>
                    <login
                        @authStart="showLoader"
                        @authEnd="hideLoader"
                        @loggedIn="loggedIn"
                        v-show="activeForm == 'login'"
                        ></login>

                    <span class="modal-menu-option"
                        @click="toggleSignup"
                        >signup</span>
                    <signup
                        @authStart="showLoader"
                        @authEnd="hideLoader"
                        v-show="activeForm == 'signup'"
                        ></signup>
                </div>

                <div v-show="!loggedOut" class="flex-col flex-center small-gap">
                    <user-header :user="user"></user-header>

                    <span class="modal-menu-option"
                        @click="toggleSettings"
                        >settings</span>
                    <settings v-show="activeForm == 'settings'"></settings>

                    <span
                        v-if="isAdmin"
                        class="modal-menu-option"
                        @click="toggleNewGame"
                        >new game</span>
                    <new-game
                        @loadingStart="showLoader"
                        @loadingEnd="hideLoader"
                        v-show="activeForm == 'newGame'"
                        ></new-game>

                    <span @click="logout" class="modal-menu-option">logout</span>
                </div>

                <div v-show="loading" class="mau-menu-loading-wrap">
                    <div class="dark-background"></div>
                    <img src="./images/gears.svg" width="150" height="150" alt="rotating loading icon"/>
                </div>
            </div>
        </script>

        <script type="text/x-template" id="mau-modal-view-component">
            <div v-if="view == 'newGame'">
                <new-game></new-game>
            </div>
            <div v-else-if="view == 'menu'">
                <mau-menu
                    @loggedIn="loggedIn"
                    :user="user"
                    ></mau-menu>
            </div>
            <div v-else>
                <span>Error</span>
            </div>
        </script>

        <script type="text/x-template" id="mau-modal-component">
            <div
                @click="hideModal"
                v-show="modalActive"
                class="modal">
                <div class="dark-background"></div>
                <div class="modal-view">
                    <modal-view
                        view="menu"
                        @loggedIn="loggedIn"
                        :user="user"
                        ></modal-view>
                </div>
            </div>
        </script>

        <script type="text/x-template" id="mau-header-component">
            <header>
                <nav class="mau-nav">
                    <span></span>
                    <div @click="toggleModal">
                        <img src="./images/icons/menu.svg" alt="menu" width="30" height="30"/>
                    </div>
                </nav>
            </header>
        </script>

        <script type="text/x-template" id="mau-stats-component">
            <div>
                <div v-if="!loadingStats" class="stat-names-wrap">
                    <span class="stat-name-left green m-stat-name">Ty</span>
                    <span class="stat-name-right purple m-stat-name">Coleman</span>
                </div>

                <div v-if="!loadingStats" class="mau-stats">
                    <div class="mau-stats-wins">
                        <p class="text-center title">Wins</p>
                        <div class="flex-row flex-center small-gap">
                            <span class="mau-stat text-right green">{{stats.wins.Ty}}</span>
                            <span class="mau-stat">{{stats.wins.Coleman}}</span>
                        </div>
                    </div>

                    <div class="mau-stats-winPercent">
                        <p class="text-center title">Win Percentage</p>
                        <div class="flex-row flex-center small-gap">
                            <span class="mau-stat text-right green">{{stats.winPercent.Ty}}</span>
                            <span class="mau-stat">{{stats.winPercent.Coleman}}</span>
                        </div>
                    </div>

                    <div class="mau-stats-streak">
                        <p class="text-center title">Longest Streak (Rounds)</p>
                        <div class="flex-row flex-center small-gap">
                            <span class="mau-stat text-right green">{{stats.longestStreak.Ty}}</span>
                            <span class="mau-stat">{{stats.longestStreak.Coleman}}</span>
                        </div>
                    </div>

                    <div class="mau-stats-savage">
                        <p class="text-center title">Most Savage Round</p>
                        <div class="flex-row flex-center small-gap">
                            <span class="mau-stat text-right green">{{stats.savage.Ty}}</span>
                            <span class="mau-stat">{{stats.savage.Coleman}}</span>
                        </div>
                    </div>

                </div> <!-- end mau-stats -->

                <div v-else class="mau-stats mau-stats-loading">
                    <div class="flex-row flex-center">
                        <span class="text-center title">
                            Loading Stats
                        </span>
                        <img class="align-bottom" src="./images/dots.svg" width="40" height="30" alt="disapearing ellipses loading animation"/>
                    </div>
                    <div class="flex-row flex-center small-gap">
                        <span class="mau-stat green text-right">T</span>
                        <span class="mau-stat">C</span>
                    </div>
                </div>

            </div>
        </script>

        <script type="text/x-template" id="dashboard-component">
            <div>
                <mau-header @toggle-modal="toggleModal"></mau-header>

                <main>
                    <mau-stats
                        :games="games"
                        :loadingStats="loadingStats"
                        ></mau-stats>
                </main>

                <modal
                    @hide-modal="hideModal"
                    :modalActive="modalActive"
                    @loggedIn="loggedIn"
                    :user="user"
                    ></modal>
            </div>
        </script>

        <script src="./components/app.vue"></script>

        <script>
            window.addEventListener("load", () => {
                if ("serviceWorker" in navigator) {
                    navigator.serviceWorker.register("./service-worker.js");
                }
            });
        </script>

    </body>
</html>
